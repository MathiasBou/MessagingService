
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="Khaled Nabli">
  <link rel="icon" href="../../favicon.ico">

  <title>Customer Intelligence Messaging API</title>

  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">


  <!-- Custom styles for this template -->
  <style>
    body {
      min-height: 500px;
      padding-top: 70px;
    }
    pre {
      white-space: pre;           /* CSS 2.0 */
      white-space: pre-wrap;      /* CSS 2.1 */
      white-space: pre-line;      /* CSS 3.0 */
      white-space: -pre-wrap;     /* Opera 4-6 */
      white-space: -o-pre-wrap;   /* Opera 7 */
      white-space: -moz-pre-wrap; /* Mozilla */
      white-space: -hp-pre-wrap;  /* HP Printers */
      word-wrap: break-word;      /* IE 5+ */
      background-color: rgba(245, 245, 245, 0);
      border: 0px solid #ccc;
      margin: -10px 0 10px;
      font-size: 14px;
    }
  </style>


  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>

    <body>

      <!-- Fixed navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Omni Channel Messaging API</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <!--ul class="nav navbar-nav">
              <li class="active"><a href="#">Statistics</a></li>
              <li><a href="#about">Docs</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul--> 
            <ul class="nav navbar-nav navbar-right">
              <li><a > Nexmo <strong>â‚¬<span id="headBalanceNexmo">...</span></strong></a></li>
              <li><a> Clickatel <strong>CR<span id="headBalanceClickatel">...</span></strong></a></li>
              <li><button style="margin-top:8px;" class="btn btn-default" onclick="displayTestMessagePopup();" data-toggle="modal" data-target="#messageTestModal">Send Test Message</button></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </nav>

      <div class="container">

        <!-- Main component for a primary marketing message or call to action -->
        <div class="row">
          <div class="col-sm-offset-4 col-sm-1">
            <img name="TWITTER" src="images/twitter.png" width="40px" class="img-responsive" onclick="displayTestMessagePopup(this);" data-toggle="modal" data-target="#messageTestModal">
          </div>
          <div class="col-sm-1">
            <img name="EMAIL" src="images/email.png" width="40px" class="img-responsive" onclick="displayTestMessagePopup(this);" data-toggle="modal" data-target="#messageTestModal">
          </div>
          <div class="col-sm-1">
            <img name="SMS" src="images/sms.png" width="40px" class="img-responsive" onclick="displayTestMessagePopup(this);" data-toggle="modal" data-target="#messageTestModal">
          </div>
          <div class="col-sm-1">
            <img name="TELEGRAM" src="images/telegram.png" width="40px" class="img-responsive" onclick="displayTestMessagePopup(this);" data-toggle="modal" data-target="#messageTestModal">
          </div>
          <div class="col-sm-1">
            <img name="SLACK" src="images/slack.png" width="40px" class="img-responsive" onclick="displayTestMessagePopup(this);" data-toggle="modal" data-target="#messageTestModal">
          </div>
        </div>

        <div class="row">
          <h2>Statistics </h2>
          <h4>Messages sent last 24h</h4>
          <table class="table table-striped">
            <thead>
              <tr>
                <th width="15%">
                  Timestamp
                </th>
                <th width="5%">
                  
                </th>
                <th width="10%">
                  From
                </th>
                <th width="15%">
                  To
                </th>
                <th width="45%">
                  Message
                </th>
                <th  width="10%">
                  
                </th>
              </tr>

            </thead>
            <tbody id="messageTableBody">
            </tbody>
          </table>
          <hr/>
        </div>



    <!-- Modal -->
    <div class="modal fade" id="messageTestModal" tabindex="-1" role="dialog" aria-labelledby="Send Test Message">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Send Test Message</h4>

          </div>
          <div  class="modal-body">
            <div class="row">
              <div class="col-lg-12">
                <form class="form-horizontal">

                <div class="form-group">
                  <label for="provider" class="col-sm-2 control-label">Channel</label>
                  <div class="col-sm-4">
                    <select class="form-control" name="testMessageChannel" onchange="updateProviderList(this);"> 
                      <option class="" value=""></option>  
                      <option value="SMS">SMS</option> 
                      <option value="EMAIL">Email</option> 
                      <option value="TWITTER">Twitter</option> 
                      <option value="TELEGRAM">Telegram</option> 
                      <option value="SLACK">Slack</option> 
                    </select>
                  </div>

                  <label for="provider" class="col-sm-2 control-label">Provider</label>
                  <div class="col-sm-4">
                    <select class="form-control" name="testMessageProvider"> 
                      <option class="" value=""></option> 
                      <option class="sms provider" value="AUTO">AUTO</option> 
                      <option class="sms provider" value="NEXMO">Nexmo.com</option> 
                      <option class="sms provider" value="CLICKATELL">Clickatell.com</option> 
                      <option class="email provider" value="HTML">HTML</option> 
                      <option class="email provider" value="TEXT">TEXT</option> 
                      <option class="twitter provider" value="PUBLIC">PUBLIC</option>
                      <option class="telegram provider" value="TELEGRAM">TELEGRAM</option>
                      <option class="slack provider" value="TELEGRAM">SLACK</option>
                    </select>
                  </div>
                </div>

                
                <div class="form-group telegram" style="display:none">
                  <label for="Sender" class="col-sm-2 control-label"></label>
                  <div class="col-sm-10">
                    <!--<a href="https://telegram.me/get_id_bot" target="_blank">GetID</a>-->
                    <a href="https://telegram.org/dl/webogram" target="_blank">Telegram Web-version</a>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a href="https://telegram.me/SasCiBot" target="_blank">Contact SASCiBot</a>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a onclick="getTelegramService()">Get recipient from last message</a>
                  </div>
                </div>

                <div class="form-group">
                  <label for="Sender" class="col-sm-2 control-label">Sender</label>
                  <div class="col-sm-10">
                    <input name="testMessageSender" type="text" class="form-control" placeholder="Sender email or mobile nr" value=""  />
                  </div>
                </div>
                <div class="form-group">
                  <label for="Recipient" class="col-sm-2 control-label">Recipient <span class="slack" style="display:none">(Channel)</span></label>
                  <div class="col-sm-10">
                    <input name="testMessageRecipient" type="text" class="form-control" placeholder="Recipient email or mobile nr" value=""  />
                  </div>
                </div>

                <div class="form-group">
                  <label for="Subject" class="col-sm-2 control-label">Subject <span class="telegram" style="display:none">(Img Url)</span></label>
                  <div class="col-sm-10">
                    <input name="testMessageSubject" type="text" class="form-control" placeholder="Subject (not required for SMS)" value="Test Email"  />
                  </div>
                </div>

                <div class="form-group">
                  <label for="Message" class="col-sm-2 control-label">Message</label>
                  <div class="col-sm-10">
                    <textarea name="testMessageBody" rows="5" class="form-control">Test Message for {{user}} - take our offer for you {{offer}}. you can add any placeholder like {{your_placeholder}} and set the value in Data field like your_placeholder=my Placeholder Value;...</textarea>
                  </div>
                </div>

                <div class="form-group">
                  <label for="BodyData" class="col-sm-2 control-label">Data</label>
                  <div class="col-sm-10">
                    <input name="testMessageBodyDataCSV" type="text" class="form-control" placeholder="CSV" value="user=SAS User;offer=CI360;"  />
                  </div>
                </div>
              </div>

            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="sendTestMessage();">Send Message</button>
          </div>
        </div>
      </div>
    </div>


    <!-- Modal -->
    <div class="modal fade" id="messageDetailsModal" tabindex="-1" role="dialog" aria-labelledby="Message Details">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Message Details</h4>

          </div>
          <div id="messageDetailsModalBody" class="modal-body">


          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>



      </div> <!-- /container -->

      <script id="messageDetailsModalContent" type="text/x-handlebars-template">
            <div class="row">
            <div class="col-lg-12">


              <form class="form-horizontal">

                <div class="form-group">
                  <label for="provider" class="col-sm-2 control-label">Provider</label>
                  <div class="col-sm-2">
                    <input type="text" class="form-control" placeholder="Provider" value="{{provider}}" readonly>
                  </div>

                  <label for="MessageId" class="col-sm-2 control-label">MessageId</label>
                  <div class="col-sm-6">
                    <input type="text" class="form-control" placeholder="MessageId" value="{{messageId}}" readonly>
                  </div>
                </div>

                <div class="form-group">
                  <label for="Status" class="col-sm-2 control-label">Status</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control" placeholder="Status" value="{{statusCd}} {{errorText}}"  readonly>
                  </div>
                </div>

                <div class="form-group">
                  <label for="Data" class="col-sm-2 control-label">Data</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control" placeholder="Data" value="{{bodyData}}"  readonly>
                  </div>
                </div>

                <div class="form-group">
                  <label for="BodyTemplate" class="col-sm-2 control-label">Template</label>
                  <div class="col-sm-10">
                    <textarea type="text" class="form-control" placeholder="BodyTemplate" rows="6" readonly> {{bodyTemplate}} </textarea>
                  </div>
                </div>
                <div class="form-group">
                  <label for="ChannelResponse" class="col-sm-2 control-label">Channel Response</label>
                  <div class="col-sm-10">
                    <textarea id="messageDetailsChannelData" class="form-control" placeholder="" rows="6" readonly></textarea>
                  </div>
                </div>

              </form>
            </div>


      </script>


      <script id="messageTableRow" type="text/x-handlebars-template">
      <tr>
        <td>{{createDttm}}</td>
        <td>
          <img src={{channelLogoUrl}} class="img-responsive" alt="{{channel}}" />

        </td>
        <td>{{sender}}</td>
        <td>{{recipient}}</td>
        <td><pre>{{body}}</pre></td>
        <td> <button role="button" class="btn btn-primary {{#if hasErrors}} btn-danger {{/if}}" onclick="updateMessageDetails('{{entryId}}');">Details</button> </td>
      </tr>
      </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/ext/jquery-1.11.3.min.js"></script>
    <script src="js/ext/bootstrap.min.js"></script>
    <script src="js/ext/handlebars-4.0.5.min.js"></script>
    <script src="js/dashboard.js"></script>



  </body>
  </html>
